<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <title>Architecture of CargoWizard project</title>
  </head>

  <body>

    <header>
      <div class="container">
          <a href="index.html"><h1>Cargowizard</h1></a>
        <h2></h2>

        <section id="downloads">
          <a href="https://github.com/CargoWizard/CargoWizard/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/CargoWizard/CargoWizard/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/CargoWizard/CargoWizard" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

<div class="container">
<section id="main_content">

<h1> <a name="cargowizard" class="anchor" href="#cargowizard">
<span class="octicon octicon-link"></span></a>Popis architektury projektu CargoWizard</h1>

<h2> <a name="content" class="anchor">
<span class="octicon octicon-link"></span></a>Obsah</h2>
<ul>
    <li><a href="#logical">Logical View</a></li>
    <li><a href="#develop">Development View</a></li>
    <li><a href="#deploy">Deployment View</a></li>
    <li><a href="#process">Process View</a></li>
    <li><a href="#usecase">Use Case Model</a></li>
    <li><a href="#scenarios">Scenarios</a></li>
    <li><a href="#business">Business Model</a></li>
</ul>


<h2> <a name="logical" class="anchor">
<span class="octicon octicon-link"></span></a>Logical View</h2>

<p>Logický pohled nabízí zobrazení zákaldní dekompozice celého systému.</p>

<img src="images/decomp.png"/>

<h3>WebInterface</h3>
<p> Webová aplikace umožňuje uživatelům komunikaci se systémem. Je postavena na
návrhovém vzoru model-view-controller. Skrze jednotlivé pohledy poskytuje
uživatelům data podle jejich rolí. Tedy zákazníkům poskytuje možnost zadávat
nové objednávky a prohlížet ty staré. Operátorům poskytuje rozhraní pro zadávání a
editaci objednávek a zobrazuje informace o zákaznících. Manažerům webová
aplikace zobrazuje statistické údaje o provozu firmy, o množství zakázek a
rychlosti jejich provedení a v neposlední řadě aktuální polohu všech vozidel.
</p>

<p>
WebAppController řídí logiku celé aplikace,
stará se o přihlašování uživatelů, identifikuje jejich role a obsluhuje
požadavky. WebAppModel poskytuje controlleru data, která získává z core
systému.
</p>

<h3>Core System</h3>
<p><b>Core</b> slouží jako backend celého sytému, komunikuje s oběma typy
frontendů (tj. webovou a on-board aplikací) a zprostředkovává jim přístup do
databáze. Core je interně řízen modulem Controller, který se stará o
přeposílání dat mezi všemi částmi systému.</p>

<p>Modul pro plánování tras (Scheduler) získává od Controlleru informace o
nových zakázkách, tyto zpracovává do logistických plánů a posílá je zpět.
Controller pak nechá spočítat modulem RouteFinder konkrétní trasu, a tu pak
skrze module On-board Device Controller posílá přímo vozidlům. Činnost
plánovače je možné ovlivňovat výběrem určité plánovací politiky
(SchedulingPolicy).</p>

<p>
Modul RouteFinder je dodaný externí firmou, která se zabývá vývojem navigačních
systémů a má tedy přístup k detailním mapovým podkladům. Vlastní modul vyžaduje
od systému typ vozidla a jeho aktuální polohu, sadu waypointů (míst s
vyzvednutím či odevzdáním zásilky) a případná omezení na jejich pořadí. Na
základě těchto údajů spočítá přesnou trasu. Modul garantuje, že trasa bude
vyhovovat zadanému typu vozidla. Další funkcí modulu je překlad adres na GPS
souřadnice. </p>

<h3>On-board Application</h3>
<p>Aplikace na zařízení komunikuje prostřednictvím zabezpečeného spojení s Core
systémem. Především přijímá informace o zakázkách a zobrazuje je řidiči a
od něj pak získává potvrzení o doručení. Dále dostává informace o trase,
kterou má řidič jet, tu zobrazuje prostřednictvím standardního navigačního
programu v daném on-board zařízení. Posledním úkolem této aplikace je
sledovat aktuální polohu vozidla a ve stanoveném intervalu ji posílat do
systému.</p>

<br/>
<p>Následuje pohled na dekompozici systému v podobě formálních class diagramů.</p>

<a href="https://raw.github.com/CargoWizard/CargoWizard/master/img/class_diagrams/Core.png">
<img
src="https://raw.github.com/CargoWizard/CargoWizard/master/img/class_diagrams/Core.png"/>
</a>
<br/>
<br/>
<a
    href="https://raw.github.com/CargoWizard/CargoWizard/master/img/class_diagrams/WebInterface.png">
<img
src="https://raw.github.com/CargoWizard/CargoWizard/master/img/class_diagrams/WebInterface.png"/>
</a>
<br/>
<br/>
<a
    href="https://raw.github.com/CargoWizard/CargoWizard/master/img/class_diagrams/On-boardApplication.png">
<img
src="https://raw.github.com/CargoWizard/CargoWizard/master/img/class_diagrams/On-boardApplication.png"/>
</a>
<br/>

<h2> <a name="develop" class="anchor">
<span class="octicon octicon-link"></span></a>Development View</h2>

<p>Tento pohled na systém zobrazuje jeho jednotlivé komponenty a vazby
mezi nimi.</p>

<a href="https://raw.github.com/CargoWizard/CargoWizard/master/img/ComponentModel.png">
<img src="images/ComponentModel.png"/>
</a>

<p>Popis většiny komponent odpovídá tomu, co bylo napsáno výše v rámci
        logického pohledu. Jedině u databáze, byť je logicky brána jako
        součást Core, nejsou uvedeny podrobnější informace. 
</p>

<h3>Database</h3>

<p>
Databázový systém řídí manager schopný provozovat několik nezávislých
databází zároveň. První databáze Clients_Orders obsahuje osobní informace o
klientech a zároveň eviduje všechny zakázky a jejich stav.</p>

<p>Databáze Employees_Trucks ukláda data o zaměstancích a eviduje jejch
docházku. Dále pak udržuje informaci o jedntlivých vozidlech, o jejich stavu,
najetých kilometrech, průměrné spotřebě a trasách, které absolvovaly. 
</p>

<p>Speciální význam má RouteDB, která uchovává dočasnou informaci o všech
aktuálních trasách. Ukládá se do ní výstup z Route Finderu. Odtud se také berou
 data trasy, která se posílají do On-board zařízení.</p>

<h2> <a name="deploy" class="anchor">
<span class="octicon octicon-link"></span></a>Deployment View</h2>

<a href="https://raw.github.com/CargoWizard/CargoWizard/master/img/DeploymentModel.png">
    <img src="images/DeploymentModel.png"/>
</a>

<h2> <a name="process" class="anchor">
<span class="octicon octicon-link"></span></a>Process View</h2>

<h3>Diagramy aktivit</h3>

<a href="https://raw.github.com/CargoWizard/CargoWizard/master/img/AD_Schedulling.png">
<img src="images/AD_Schedulling.png"/>
</a>
<p>Tento diagram ukazuje, jak probíhá plánování trasy objednávek. Celý tento proces běží jako job na pozadí aplikace.
<ul>
	<li>Nejprve se z DB načtou nové objednávky, které ještě nebyly naplánovány.</li>
	<li>Pokud jsou nějaké, začne jejich plánování podle plánovací politiky.</li>
	<li>Po naplánování se objednávky uloží a potvrdí, uloží se rovněž i naplánované trasy.</li>	
</ul>
</p>

<a href="https://raw.github.com/CargoWizard/CargoWizard/master/img/AD_Delivery.png">
<img src="images/AD_Delivery.png"/>
</a>
<p>Tento diagram ukazuje, jak probíhá vyřizování objednávek z pohledu řidiče/jeho OBD.
<ul>
	<li>Poté, co řidič nastoupí do auta, zapne OBD a vyžádá si trasu od systému.</li>
	<li>Po obdržení trasy a spušnění navigace, řidič vyrazí na cesty. OBD automaticky začne průběžně logovat do systému data o cestě.</li>
	<li>Řidič může naložit náklad / vyložit náklad / vrátit se zpět, pokud má hotovo.</li>	
</ul>
</p>

<h2> <a name="usecase" class="anchor">
<span class="octicon octicon-link"></span></a>Use Case Model </h2>

<a href="https://raw.github.com/CargoWizard/CargoWizard/master/img/use_case_model.png">
<img src="images/use_case_model.png"/>
</a>

<p>Následuje popis jednotlivých případů užití spolu s odkazy do Katalogu
požadavků [1].</p>

<h3>Phone Order</h3>
<p>Zákazník volá do telefonního centra kvůli zadání nové zakázky nebo úpravě
parametrů staré. Operátor kontaktuje zákazníka ohledně výsledku potvrzení
objednávky
</br><b>Use Cases:</b> UC2 - UC8
</p>

<h3>Order Delivery</h3>
<p>Zákazník zadává novou objednávku prostřednictvím webového rozhraní. Systém
posílá zákazníkovi potvrzení o objednávce či její změně.
</br><b>Use cases:</b> UC1, UC2 - UC5
</p>

<h3>Change Delivery</h3>
<p> Operátor mění parametry objednávky.
</br><b>Use cases:</b> UC6 UC7
</p>

<h3>Request Statistics</h3>
<p> Manažer prostřednictvím webového rozhraní požádá o zobrazení statických dat.
</br><b>Use cases:</b> UC9
</p>

<h3>Schedule delivery</h3>
<p> Scheduler naplánuje objednávku do určité trasy.
</br><b>Use cases:</b> UC1 UC2 UC6
</p>

<h3>Get Statistics</h3>
<p> Systém vyhledá v databázi statistická data a předá je webové aplikaci.
</br><b>Use cases:</b> UC9
</p>

<h3>Administer System</h3>
<p> Administrátor se skrze webové rozhraní přihlásí do systému.
</br><b>Use cases:</b> 
</p>

<h3>Create Delivery Route</h3>
<p> Systém přesně spočítá zadanou trasu v GPS souřadnicích a přepošle ji do
on-board do zařízení.
</br><b>Use cases:</b> UC1 UC2 UC3
</p>

<h3>Confirm Delivery</h3>
<p> Systém přijímá potvrzení o předání zakázky zákazníkovi.
</br><b>Use cases:</b> UC1 - UC3
</p>

<h3>Deliver Cargo</h3>
<p>On-board aplikace přijímá trasu z centráního systému a zobrazí ji řidiči na
zařízení</p>
</p>

<h3>Send Confirmation</h3>
<p>Řidič zadá potvrzení o předání zakázky. On-board aplikace posílá potvrzení do
systému.
</p>

<h3>Manual Delivery</h3>
<p>Zákazník předá zboží řidiči/přijme zboží od řidiče. Řidič vystaví povrzení o
příjmu/předání.
</br><b>Use cases:</b> UC1 - UC3
</p>

<h2> <a name="scenarios" class="anchor">
<span class="octicon octicon-link"></span></a>Scenarios</h2>

<h3>Change Order </h3>
<p>
<a  href="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/ChangeOrder.png">
<img src="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/ChangeOrder.png"/></a><br/>
</p>

<h3>Change Order - Failed </h3>
<p>
<a  href="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/ChangeOrderFailed.png">
<img src="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/ChangeOrderFailed.png"/></a><br/>
</p>

<h3>Change Order - Failed - Storno</h3>
<p>
<a  href="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/ChangeOrderFailedStorno.png">
<img src="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/ChangeOrderFailedStorno.png"/></a><br/>
</p>

<h3>Order Operator</h3>
<p>
<a  href="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/OrderOperator.png">
<img src="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/OrderOperator.png"/></a><br/>
</p>

<h3>Order Operator - Replan</h3>
<p>
<a  href="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/OrderOperatorReplan.png">
<img src="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/OrderOperatorReplan.png"/></a><br/>
</p>

<h3>Order Operator - Replan - Failed - Stored</h3>
<p>
<a  href="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/OrderOperatorReplanFailedStored.png">
<img src="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/OrderOperatorReplanFailedStored.png"/></a><br/>
</p>

<h3>Order Operator - Replan - Failed - Storno</h3>
<p>
<a  href="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/OrderOperatorReplanFailedStorno.png">
<img src="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/OrderOperatorReplanFailedStorno.png"/></a><br/>
</p>

<h3>Order Web</h3>
<p>
<a  href="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/OrderWeb.png">
<img src="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/OrderWeb.png"/></a><br/>
</p>

<h3>Order Web - Replan</h3>
<p>
<a  href="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/OrderWebReplan.png">
<img src="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/OrderWebReplan.png"/></a><br/>
</p>

<h3>Order Web - Replan - Failed - Stored</h3>
<p>
<a  href="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/OrderWebReplanFailedStored.png">
<img src="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/OrderWebReplanFailedStored.png"/></a><br/>
</p>

<h3>Order Web - Replan - Failed - Storno</h3>
<p>
<a  href="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/OrderWebReplanFailedStorno.png">
<img src="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/OrderWebReplanFailedStorno.png"/></a><br/>
</p>

<h3>Statistics</h3>
<p>
<a  href="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/Statistics.png">
<img src="https://raw.github.com/CargoWizard/CargoWizard/master/img/Sequence%20Diagrams/Statistics.png"/></a><br/>
</p>


<h2> <a name="business" class="anchor">
<span class="octicon octicon-link"></span></a>Business Model</h2>

<p>Základní pohled na fungování společnosti.</p>

<img src="images/business_model.png"/>

<h2> <a name="test" class="anchor" href="#refs">
<span class="octicon octicon-link"></span></a>Reference</h2>

<p>[<a href="CargoWizard-SRS-Dict-Matrix.pdf">1</a>] CargoWizard - Katalog Požadavků </p>

      </section>
    </div>
  </body>
</html>
